# Maintaining CodePair

## Releasing a New Version

### 1. Update the version number.

- Update the `version` field in the root `package.json` file to reflect the overall version of the monorepo.
- Also, update `version` fields in the [`frontend` package.json](https://github.com/yorkie-team/codepair/blob/1f10dff1d9c253f921ba136c812383fbb292078f/frontend/package.json#L3) and [`backend` package.json](https://github.com/yorkie-team/codepair/blob/1f10dff1d9c253f921ba136c812383fbb292078f/backend/package.json#L3).

### 2. Write changelog of this version in [CHANGELOG.md](https://github.com/yorkie-team/codepair/blob/main/CHANGELOG.md).

Copy the release notes automatically generated by GitHub and categorize them as `Added`/`Changed`/`Fixed`.

1. Click on the `Releases` in GitHub.
2. Click on the `Draft a new release` button.
3. Create a new tag.
4. Click on the `Generate release notes` button.
5. Copy the content generated into the body and categorize each item.

<img width="600" alt="image" src="https://user-images.githubusercontent.com/81357083/233356577-acc1dd33-5ad5-4b51-9f2e-6c771a063ccd.png">

### 3. Create [Pull Request](https://github.com/yorkie-team/codepair/commits/main/CHANGELOG.md) for changelog and merge it into main.

### 4. Publish [a new release](https://github.com/yorkie-team/codepair/releases/new).

After creating the release in step 2, click on the `Publish release` button.

<img width="600" alt="image" src="https://user-images.githubusercontent.com/81357083/233360815-86b723ec-3e63-4640-af1f-e61f61519549.png">

### 5. Deploy

#### 1) Docker

When you publish the release in step 3, [GitHub Action](https://github.com/yorkie-team/codepair/blob/main/.github/workflows/docker-publish.yaml) will deploy Yorkie to [Docker Hub](https://hub.docker.com/r/yorkieteam/codepair/tags).

#### 2) GitHub Pages

When you publish the release in step 3, [GitHub Action](https://github.com/yorkie-team/codepair/blob/main/.github/workflows/gh_pages.yaml) will deploy the frontend to [GitHub Pages](https://codepair.yorkie.dev).
