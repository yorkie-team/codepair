# Configuration for CodePair application
codepair:
  name: codepair
  namespace: codepair

  autoscaling:
    enabled: false
    replicaCount: 1

  image:
    repository: yorkieteam/codepair
    pullPolicy: IfNotPresent
    tag: "0.1.32"

  ports:
    serverPort: 3000

  env:
    databaseUrl: "mongodb://mongodb.mongodb.svc.cluster.local:27017/codepair"
    
    # GitHub OAuth Settings
    githubClientId: ""
    githubClientSecret: ""
    githubCallbackUrl: ""
    githubAuthorizationUrl: "https://github.com/login/oauth/authorize"
    githubTokenUrl: "https://github.com/login/oauth/access_token"
    githubUserProfileUrl: "https://api.github.com/user"
    
    # JWT Settings
    jwtAccessTokenSecret: ""
    jwtAccessTokenExpirationTime: "86400"
    jwtRefreshTokenSecret: ""
    jwtRefreshTokenExpirationTime: "2592000"
    
    # Frontend and API URLs
    frontendBaseUrl: ""
    yorkieApiAddr: ""
    
    # Yorkie Project Settings
    yorkieProjectName: "codepair"
    yorkieProjectSecretKey: ""
    
    # AI/Intelligence Settings
    yorkieIntelligence: "openai:gpt-4o-mini"
    openaiApiKey: ""
    
    # LangChain Settings
    langchainTracingV2: "true"
    langchainApiKey: ""
    langchainProject: "codepair-prod"
    
    # File Upload Settings
    fileUpload: "s3"
    awsAccessKeyId: ""
    awsSecretAccessKey: ""
    awsRegion: "ap-northeast-2"
    bucketName: "yorkie-codepair"

  resources: {}
  
# Configuration for ingress
ingress:
  enabled: true
  className: nginx
  
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":443}]'
    alb.ingress.kubernetes.io/backend-protocol: HTTP
    alb.ingress.kubernetes.io/backend-protocol-version: HTTP1
    alb.ingress.kubernetes.io/group.name: "api.yorkie.dev"
    alb.ingress.kubernetes.io/group.order: "3"
  
  hosts:
    enabled: true
    apiHost: "codepair-api.yorkie.dev"
  
  awsAlb:
    enabled: true
    certArn: "arn:aws:acm:ap-northeast-2:123412341234:certificate/1234-1234-1234-1234-1234"

  ncpAlb:
    enabled: false
    certNo: 1234

  nginx:
    enabled: true

# Configuration for yorkie-mongodb
yorkie-mongodb:
  name: mongodb
  namespace: mongodb
  port: 27017
  image:
    registry: docker.io
    repository: mongo
    tag: "6.0"
  persistence:
    dataSize: 1Gi
    configSize: 500Mi
    storageClass: standard
  sharded:
    enabled: false
  enabled: true
